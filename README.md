#DC Assistant Docker
В этом репозитории находятся компоненты, необходимые для деплоя приложения DC Assistant 
в качестве контейнеров Docker. Контейнеры создаются и разворачиваются с помощью Docker Compose.

При деплое будут созданы и запущены следующие котейнеры:

* `db`  СУБД контейнер Postgres 11. 
Для обеспечения персистентности данных, данные хранятся в каталоге, 
который монтируется в хостовую файловую систему.

* `app` Веб приложение на фреймворке Django 3.
Контейнер python3.7 с настроенным окружением. Запускается Gunicorn на 8001 порту.

* `nginx` Реверс прокси контейнер Nginx 1.17
Контейнер nginx проксирует запросы в контейнер app по внутреннему имени контейнера.
Обслуживает отдачу статики.

##Быстрый старт
Чтобы запустить DC Assistant Docker, выполните следующие команды.

Клонируем репозиторий в любой каталог по вашему усмотрению:

```
git clone https://github.com/uniti-in-diversity/dc_assistant_docker.git /opt/dc_assistant
```

Запускаем сборку контейнера app (остальные контейнеры postgres и nginx запускаются из готовых публичных образов):

```
docker-compose build --no-cache app
```

Запускаем все контейнеры:

```
docker-compose up -d
```

Приложение будет доступно через несколько минут. Откройте URL 
`http://host:8080/` в веб-браузере.
Учетная запись по умолчанию(суперюзер):

* Username: **admin**
* Password: **123456**

##Зависимости 
Этот проект предполагает наличие установленного Docker и docker-compose следующих версий: 

* Версия Docker должна быть не ниже 17.05 
* Версия docker-compose должна быть не ниже 1.17.0 

Чтобы проверить версию, установленную в вашей системе, запустите 
```
docker --version
docker-compose --version
```

##Конфигурация
Некоторые параметры конфигурации приложения можно изменить путем изменения значений переменных среды указанных 
в файлх *.env*, которые расположенных в каталоге *env*.

Через изменение значений в файле *pg.env* можно задать для postgress имя БД, юзера и пароль. Сделать это необходимо до первого запуска, чтобы postgres создал базу с тем именем и учетными данными, которые прописаны в настройках подключения к БД в веб приложении.

Не забудьте задать эти же значения в файле *dcassistant.env*, чтобы приложение смогло подключиться к БД.
Так же в файле dcassistant.env задается логин и пароль суперюзера веб приложения. Суперюзер будет создан при начальной 
инициализации приложения, рекомендуется сменить дефолтные значения на свои собственные.

##